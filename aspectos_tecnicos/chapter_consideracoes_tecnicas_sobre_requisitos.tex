\chapter{Consideração técnicas sobre requisitos}
	Neste capítulo apresentamos algumas considerações técnicas e táticas para cumprir com êxito três principais requisitos não funcionais claros para Cloud Computing: disponibilidade, performance e segurança.

\section{Disponibilidade}

	Assume-se que a nuvem sempre estará disponível, 24 horas por dia, 7 dias por semana. Porém nenhum de seus componentes é a prova de falhas. O host físico de uma máquina virtual pode falhar, bem como a rede virtual com menor probabilidade, ao sofrer um ataque de negação de serviço (DDoS), por exemplo.

	Os provedores de serviço na nuvem fornecem dados aos consumidores sobre a porcentagem de tempo que a rede pode ficar disponível. Apesar de ser um número pequeno (para alguns planos de serviço da AWS variam entre 0,05\% e 0,001\%), é de responsabilidade do arquiteto do sistema que consumidor projetá-lo de tal forma que seja incluído um plano de contingência para essa indisponibilidade.

	Discutiremos algumas táticas a seguir:

	\subsection{Stateless}
	Arquitear sistemas \textit{stateless} (Sem estado) permite que qualquer instância de serviço possa servir igualmente uma requisição do cliente. Assim, se um servidor falha as requisições são redirecionadas para outra instância de serviço.

	\subsection{Instâncias reservas}
	O sistema deve incluir instâncias reservas da aplicação, para onde o tráfego de rede será redirecionado caso as instâncias principais venham a falhar.

	\subsection{Dados em zonas distintas}
	Um provedor na nuvem pode disponibilizar zonas distintas, que correspondem a \textit{data centers} distintos. O sistema então pode implementar uma redundância com diversas cópias dos dados espalhados por essas zonas. Se a rede de uma zona cair, uma zona que está ociosa ou a mais próxima ativa assume seu lugar.
	
	\subsection{Degradação silenciosa}
 	Os princípios para lidar com falhas em aplicações se baseam em táticas de renovação ou remoção de serviços:
	
	\begin{itemize}
	\item
	\textbf{Restauração rápida}:
	Crie \textit{timeouts} curtos para testar periodicamente o status de cada componente, restabelencendo-o antes que o sistema sinta essa falha.

	\item
	\textbf{Downgrades}:
	Cada feature é projetada com capacidade de ser degradada ou reduzida para uma representação de menor qualidade. Ex.: \textit{streaming} de vídeos.

	\item
	\textbf{Remoção de features}:
	Se a rede estiver mais lenta que o normal e a \textit{feature} não for crítica, ela deve ser removida da página.

	\end{itemize}
	\iffalse
	%TODO: Escrever
	\subsection{Exemplo: Netflix's Simian Army}

	\subsection{Exemplo: Skype Reverse NAT}
	\fi


\section{Performance}

Aplicações com boas performances computacionais são aquelas que respondem de forma instântanea ou com o tempo que lhe foi específicado, dentro de um limite tolerável que não prejudique uma atividade do usuário. Essa capacidade em uma máquina virtual ou física vai depender do que está sendo executado. Assim, cada aplicação deve monitorar a si mesma para determinar os recursos que recebe e quais irá precisar em um dado momento.

Uma vantagem da computação em nuvem é o provisonamento de \textit{hosts} elásticos, isto é, que permitem que recuroso adicionais sejam adquiridos conforme for necessário. Por meio do mecanismo de clusterização uma máquina virtual adicional pode provir essa capacidade computacional extra. Alguns provedores em nuvem alocam recursos automaticamente, enquanto outros consideram a alocação responsabilidade do usuário.

Mesmo se o provedor faça essa alocação de recursos de forma automática, a aplicação deve ser arquitetada de forma a estar ciente do uso de recursos atual e futuro, em qualquer instante de tempo. 

O provedor não pode fazer nada mais do que usar alguns algoritmos genéricos para determinar se há necessidade de alocar ou liberar mais recursos. Uma aplicação precisa ter um modelo de seu comportamento e estar preparada para fazer uma alocação sozinha de recursos. No pior caso, a aplicação pode comparar suas previsões com a do provedor para ter uma noção do que pode ocorrer.


\section{Segurança}
Segurança é uma temática que geralmente abrange aspectos técnicos e não-técnicos. Muitos esquemas de segurança não podem ser provados teoricamente como modelos seguros, mas empiracamente trazem resultados.

Aspectos não-técnicos são, por exemplo, o nível de confiança que é depositada no provedor de nuvem, as seguranças físicas que o servidor utiliza, e os padrões de governança implementado entre seus funcionários. Nesta secção focaremos apenas nos aspectos técnicos.

\iffalse
Applications in the cloud are accessed over the Internet using standard Internet protocols. 
The security and privacy issues deriving from the use of the Internet are substantial but no different from the security issues faced by applications not hosted in the cloud. The one significant security element introduced by the cloud is multi-tenancy. Multi-tenancy means that your application is utilizing a virtual machine on a physical computer that is hosting multiple virtual machines. If one of the other tenants on your machine is malicious, what damage can they do to you?
\fi

O arquiteto responsável deve considerar as quatro possíveis formas de ataque abaixo utilizando \textit{multi-tenancy}:
\begin{itemize}
	\item
	\textbf{Acesso indevido de informações}: 
	Para cada \textit{tenant} é dado um conjunto de recursos virtuais. Cada recurso virtual é mapeado para um recurso físico. É possível que uma informação de um recurso físico vaze de um \textbf{tenant} para outro, com ataques de memory overflow e exploração de bugs de execução especulativa, por exemplo.

	\item
	\textbf{"Fuga"~de máquina virtual}: 
	Uma máquina virtuaĺ é isolada 
	A virtual machine is isolated from other virtual machines through the use of a distinct address space. It is possible, however, that an attacker can exploit software errors in the hypervisor to access information they are not entitled to. Thus far, such attacks are extremely rare.

	\item
	\textbf{Ataque por canal lateral } (\textit{Side-channel attack}): 
	Um atacante malicioso pode deduzir partes de chaves ou informações sensíveis monitorando os horários do ativamento de cache. Isso atualmente é um estudo acadêmico mas pode se tornar um problema futuro. Outras formas de ataques laterais em criptoanálises já foram comprovadas em alguns estudos, como por exemplo, a recuperação de uma chave a partir da análise sonora a partir da captura por um microfone de ruídos de um processador primitivo. 
\iffalse
	\item
	\textbf{Ataque de negação de serviço}:
	Other tenants may use sufficient resources on the host computer so that your application is not able to provide service. Some providers allow customers to reserve entire machines for their exclusive use. Although this defeats some of the economic benefits of using the cloud, it is a mechanism to prevent multi-tenancy attacks. An organization should consider possible attacks when deciding which applications to host in the cloud, just as they should when considering any hosting option. 
\fi
\end{itemize}