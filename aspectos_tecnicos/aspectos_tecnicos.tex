\chapter{Estrutura}

\section{Hypervisor}
\section{Orquestrador}
\section{Armazenamento}
\section{Rede}

\chapter{Consideração técnicas sobre requisitos}
	Neste capítulo apresentamos algumas considerações técnicas e táticas para cumprir com êxito três principais requisitos não funcionais claros para Cloud Computing: disponibilidade, performance e segurança.

\section{Disponibilidade}

	Assume-se que a nuvem sempre estará disponível, 24 horas por dia, 7 dias por semana. Porém nenhum de seus componentes é a prova de falhas. O host físico de uma máquina virtual pode falhar, bem como a rede virtual com menor probabilidade, ao sofrer um ataque de negação de serviço (DDoS), por exemplo.

	Os provedores de serviço na nuvem fornecem dados aos consumidores sobre a porcentagem de tempo que a rede pode ficar disponível. Apesar de ser um número pequeno (para alguns planos de serviço da AWS variam entre 0,05\% e 0,001\%), é de responsabilidade do arquiteto do sistema que consumidor projetá-lo de tal forma que seja incluído um plano de contingência para essa indisponibilidade.

	Discutiremos algumas táticas a seguir:

	\subsection{Stateless}
	Arquitear sistemas \textit{stateless} (Sem estado) permite que qualquer instância de serviço possa servir igualmente uma requisição do cliente. Assim, se um servidor falha as requisições são redirecionadas para outra instância de serviço.

	\subsection{Instâncias reservas}
	O sistema deve incluir instâncias reservas da aplicação, para onde o tráfego de rede será redirecionado caso as instâncias principais venham a falhar.

	\subsection{Dados em zonas distintas}
	Um provedor na nuvem pode disponibilizar zonas distintas, que correspondem a \textit{data centers} distintos. O sistema então pode implementar uma redundância com diversas cópias dos dados espalhados por essas zonas. Se a rede de uma zona cair, uma zona que está ociosa ou a mais próxima ativa assume seu lugar.
	
	\subsection{Degradação silenciosa}
 	Os princípios para lidar com falhas em aplicações se baseam em táticas de renovação ou remoção de serviços:
	
	\begin{itemize}
	\item
	\textbf{Restauração rápida}:
	Crie \textit{timeouts} curtos para testar periodicamente o status de cada componente, restabelencendo-o antes que o sistema sinta essa falha.

	\item
	\textbf{Downgrades}:
	Cada feature é projetada com capacidade de ser degradada ou reduzida para uma representação de menor qualidade. Ex.: \textit{streaming} de vídeos.

	\item
	\textbf{Remoção de features}:
	Se a rede estiver mais lenta que o normal e a \textit{feature} não for crítica, ela deve ser removida da página.

	\end{itemize}
	\iffalse
	%TODO: Escrever
	\subsection{Exemplo: Netflix's Simian Army}

	\subsection{Exemplo: Skype Reverse NAT}
	\fi


\section{Performance}

Aplicações com boas performances computacionais são aquelas que respondem de forma instântanea ou com o tempo que lhe foi específicado, dentro de um limite tolerável que não prejudique uma atividade do usuário. Essa capacidade em uma máquina virtual ou física vai depender do que está sendo executado. Assim, cada aplicação deve monitorar a si mesma para determinar os recursos que recebe e quais irá precisar em um dado momento.

Uma vantagem da computação em nuvem é o provisonamento de \textit{hosts} elásticos, isto é, que permitem que recuroso adicionais sejam adquiridos conforme for necessário. Por meio do mecanismo de clusterização uma máquina virtual adicional pode provir essa capacidade computacional extra. Alguns provedores em nuvem alocam recursos automaticamente, enquanto outros consideram a alocação responsabilidade do usuário.

Mesmo se o provedor faça essa alocação de recursos de forma automática, a aplicação deve ser arquitetada de forma a estar ciente do uso de recursos atual e futuro, em qualquer instante de tempo. 

O provedor não pode fazer nada mais do que usar alguns algoritmos genéricos para determinar se há necessidade de alocar ou liberar mais recursos. Uma aplicação precisa ter um modelo de seu comportamento e estar preparada para fazer uma alocação sozinha de recursos. No pior caso, a aplicação pode comparar suas previsões com a do provedor para ter uma noção do que pode ocorrer.

\iffalse

\section{Segurança}
\fi